{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file://C%3A/My/Project/Project%20na%20WSPA/Appointly/src/app/api/register/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabase = createClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n);\r\n\r\nexport async function POST(req: Request){\r\n    const body = await req.json();\r\n    const { fullName, email, password } = body;\r\n\r\n    console.log(`FullName:${fullName}, Email: ${email}, Password: ${password}`);\r\n    if (!email || !password) {\r\n        return NextResponse.json({ error: 'Email and password required' }, { status: 400 });\r\n    }\r\n\r\n    const { data: userData, error: signUpError } = await supabase.auth.admin.createUser({\r\n        email,\r\n        password,\r\n        email_confirm: true,\r\n        user_metadata:{\r\n            fullName: 'Full name',\r\n        }\r\n    });\r\n\r\n    if (signUpError) {\r\n        console.log(signUpError);\r\n        return NextResponse.json({ error: signUpError.message }, {status: 400});\r\n    }\r\n\r\n    const userId = userData.user?.id ;\r\n\r\n    if (!userId) {\r\n        return NextResponse.json({ error: 'User ID was not returned' }, { status: 500 });\r\n    }\r\n    const { error: updateError } = await supabase.from('users').upsert({\r\n        id: userId,\r\n        email,\r\n        fullName,\r\n    });\r\n\r\n    if (updateError) {\r\n        return NextResponse.json({ error: updateError.message }, { status: 500 });\r\n    }\r\n\r\n    return NextResponse.json({ message: 'Successful registration' });\r\n}"],"names":[],"mappings":";;;AAAA;AACA;;;AAEA,MAAM,WAAW,CAAA,GAAA,yLAAA,CAAA,eAAY,AAAD,EACxB,QAAQ,GAAG,CAAC,wBAAwB,EACpC,QAAQ,GAAG,CAAC,yBAAyB;AAGlC,eAAe,KAAK,GAAY;IACnC,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG;IAEtC,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,SAAS,SAAS,EAAE,MAAM,YAAY,EAAE,UAAU;IAC1E,IAAI,CAAC,SAAS,CAAC,UAAU;QACrB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACrF;IAEA,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;QAChF;QACA;QACA,eAAe;QACf,eAAc;YACV,UAAU;QACd;IACJ;IAEA,IAAI,aAAa;QACb,QAAQ,GAAG,CAAC;QACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO,YAAY,OAAO;QAAC,GAAG;YAAC,QAAQ;QAAG;IACzE;IAEA,MAAM,SAAS,SAAS,IAAI,EAAE;IAE9B,IAAI,CAAC,QAAQ;QACT,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAClF;IACA,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,CAAC;QAC/D,IAAI;QACJ;QACA;IACJ;IAEA,IAAI,aAAa;QACb,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO,YAAY,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IAC3E;IAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAA0B;AAClE","debugId":null}}]
}